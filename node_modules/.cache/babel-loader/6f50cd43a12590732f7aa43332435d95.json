{"ast":null,"code":"import _toConsumableArray from\"/Users/coltraneyan/repos/ethertree/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/coltraneyan/repos/ethertree/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/coltraneyan/repos/ethertree/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/coltraneyan/repos/ethertree/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import\"./App.css\";import Input from\"./components/Input\";import Tree from\"./components/Tree.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var provider=new ethers.providers.EtherscanProvider(\"homestead\",\"GA5DBDU9R58E28EUTCVD9KA3H3FXBP5MH94\");function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),tree=_useState2[0],setTree=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),address=_useState4[0],setAddress=_useState4[1];var _useState5=useState(\"Info\"),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];useEffect(function(){function fetchHistory(_x){return _fetchHistory.apply(this,arguments);}function _fetchHistory(){_fetchHistory=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(address){var historyGetter,txList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return provider.getHistory(address);case 2:historyGetter=_context.sent;txList=new Set();historyGetter.forEach(function(tx){txList.add(tx.from===address?tx.to:tx.from);});setTree(_toConsumableArray(txList).slice(0,20));setShow(\"Graph\");case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchHistory.apply(this,arguments);}fetchHistory(address);},[address]);function triggerFetch(_x2){return _triggerFetch.apply(this,arguments);}function _triggerFetch(){_triggerFetch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newAddress){var checksumAddress;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setShow(\"Loading\");_context2.prev=1;_context2.next=4;return provider._getAddress(newAddress);case 4:checksumAddress=_context2.sent;setAddress(checksumAddress);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);setShow(\"Error\");case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _triggerFetch.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(Input,{triggerFetch:triggerFetch}),/*#__PURE__*/_jsx(Tree,{show:show,tree:tree,triggerFetch:triggerFetch,address:address})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ethers","Input","Tree","provider","providers","EtherscanProvider","App","tree","setTree","address","setAddress","show","setShow","fetchHistory","getHistory","historyGetter","txList","Set","forEach","tx","add","from","to","slice","triggerFetch","newAddress","_getAddress","checksumAddress"],"sources":["/Users/coltraneyan/repos/ethertree/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport \"./App.css\";\nimport Input from \"./components/Input\";\nimport Tree from \"./components/Tree.js\";\n\nconst provider = new ethers.providers.EtherscanProvider(\n  \"homestead\",\n  \"GA5DBDU9R58E28EUTCVD9KA3H3FXBP5MH94\"\n);\n\nfunction App() {\n  const [tree, setTree] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [show, setShow] = useState(\"Info\");\n\n  useEffect(() => {\n    async function fetchHistory(address) {\n      const historyGetter = await provider.getHistory(address);\n      const txList = new Set();\n      historyGetter.forEach((tx) => {\n        txList.add(tx.from === address ? tx.to : tx.from);\n      });\n\n      setTree([...txList].slice(0, 20));\n      setShow(\"Graph\");\n    }\n\n    fetchHistory(address);\n  }, [address]);\n\n  async function triggerFetch(newAddress) {\n    setShow(\"Loading\");\n\n    try {\n      const checksumAddress = await provider._getAddress(newAddress);\n      setAddress(checksumAddress);\n    } catch (error) {\n      setShow(\"Error\");\n    }\n  }\n\n  return (\n    <div className=\"page-container\">\n      <Input triggerFetch={triggerFetch} />\n      <Tree\n        show={show}\n        tree={tree}\n        triggerFetch={triggerFetch}\n        address={address}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"2eAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,MAAO,WAAP,CACA,MAAOC,MAAP,KAAkB,oBAAlB,CACA,MAAOC,KAAP,KAAiB,sBAAjB,C,wFAEA,GAAMC,SAAQ,CAAG,GAAIH,OAAM,CAACI,SAAP,CAAiBC,iBAArB,CACf,WADe,CAEf,qCAFe,CAAjB,CAKA,QAASC,IAAT,EAAe,CACb,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,eAA8BV,QAAQ,CAAC,EAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eACA,eAAwBZ,QAAQ,CAAC,MAAD,CAAhC,yCAAOa,IAAP,eAAaC,OAAb,eAEAb,SAAS,CAAC,UAAM,SACCc,aADD,gJACd,iBAA4BJ,OAA5B,iKAC8BN,SAAQ,CAACW,UAAT,CAAoBL,OAApB,CAD9B,QACQM,aADR,eAEQC,MAFR,CAEiB,GAAIC,IAAJ,EAFjB,CAGEF,aAAa,CAACG,OAAd,CAAsB,SAACC,EAAD,CAAQ,CAC5BH,MAAM,CAACI,GAAP,CAAWD,EAAE,CAACE,IAAH,GAAYZ,OAAZ,CAAsBU,EAAE,CAACG,EAAzB,CAA8BH,EAAE,CAACE,IAA5C,EACD,CAFD,EAIAb,OAAO,CAAC,mBAAIQ,MAAJ,EAAYO,KAAZ,CAAkB,CAAlB,CAAqB,EAArB,CAAD,CAAP,CACAX,OAAO,CAAC,OAAD,CAAP,CARF,sDADc,+CAYdC,YAAY,CAACJ,OAAD,CAAZ,CACD,CAbQ,CAaN,CAACA,OAAD,CAbM,CAAT,CALa,QAoBEe,aApBF,iJAoBb,kBAA4BC,UAA5B,0IACEb,OAAO,CAAC,SAAD,CAAP,CADF,wCAIkCT,SAAQ,CAACuB,WAAT,CAAqBD,UAArB,CAJlC,QAIUE,eAJV,gBAKIjB,UAAU,CAACiB,eAAD,CAAV,CALJ,mFAOIf,OAAO,CAAC,OAAD,CAAP,CAPJ,sEApBa,+CA+Bb,mBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,KAAC,KAAD,EAAO,YAAY,CAAEY,YAArB,EADF,cAEE,KAAC,IAAD,EACE,IAAI,CAAEb,IADR,CAEE,IAAI,CAAEJ,IAFR,CAGE,YAAY,CAAEiB,YAHhB,CAIE,OAAO,CAAEf,OAJX,EAFF,GADF,CAWD,CAED,cAAeH,IAAf"},"metadata":{},"sourceType":"module"}